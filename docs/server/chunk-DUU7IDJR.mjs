import { createRequire } from 'node:module';
globalThis['require'] ??= createRequire(import.meta.url);
import{d as m,e as E}from"./chunk-ZAAD4LGZ.mjs";import{a as h,b as T,e as s}from"./chunk-YJ4N4I6Q.mjs";var U,q,ae,A=s(()=>{"use strict";U="AWS_PROFILE",q="default",ae=o=>o.profile||process.env[U]||q});import{homedir as B}from"os";import{sep as J}from"path";var C,z,p,l=s(()=>{"use strict";C={},z=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",p=()=>{let{HOME:o,USERPROFILE:e,HOMEPATH:t,HOMEDRIVE:r=`C:${J}`}=process.env;if(o)return o;if(e)return e;if(t)return`${r}${t}`;let i=z();return C[i]||(C[i]=B()),C[i]}});import{join as Q}from"path";var Y,S,_=s(()=>{"use strict";l();Y="AWS_CONFIG_FILE",S=()=>process.env[Y]||Q(p(),".aws","config")});var N,H=s(()=>{"use strict";E();g();N=o=>Object.entries(o).filter(([e])=>{let t=e.indexOf(f);return t===-1?!1:Object.values(m).includes(e.substring(0,t))}).reduce((e,[t,r])=>{let i=t.indexOf(f),n=t.substring(0,i)===m.PROFILE?t.substring(i+1):t;return e[n]=r,e},h({},o.default&&{default:o.default}))});import{join as Z}from"path";var ee,w,b=s(()=>{"use strict";l();ee="AWS_SHARED_CREDENTIALS_FILE",w=()=>process.env[ee]||Z(p(),".aws","credentials")});var oe,te,d,I=s(()=>{"use strict";E();g();oe=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,te=["__proto__","profile __proto__"],d=o=>{let e={},t,r;for(let i of o.split(/\r?\n/)){let n=i.split(/(^|\s)[;#]/)[0].trim();if(n[0]==="["&&n[n.length-1]==="]"){t=void 0,r=void 0;let c=n.substring(1,n.length-1),a=oe.exec(c);if(a){let[,u,,O]=a;Object.values(m).includes(u)&&(t=[u,O].join(f))}else t=c;if(te.includes(c))throw new Error(`Found invalid profile name "${c}"`)}else if(t){let c=n.indexOf("=");if(![0,-1].includes(c)){let[a,u]=[n.substring(0,c).trim(),n.substring(c+1).trim()];if(u==="")r=a;else{r&&i.trimStart()===i&&(r=void 0),e[t]=e[t]||{};let O=r?[r,a].join(f):a;e[t][O]=u}}}}return e}});import{promises as re}from"fs";var ie,R,F,P=s(()=>{"use strict";({readFile:ie}=re),R={},F=(o,e)=>((!R[o]||e?.ignoreCache)&&(R[o]=ie(o,"utf8")),R[o])});import{join as L}from"path";var j,f,v,g=s(()=>{"use strict";H();_();b();l();I();P();j=()=>({}),f=".",v=async(o={})=>{let{filepath:e=w(),configFilepath:t=S()}=o,r=p(),i="~/",n=e;e.startsWith(i)&&(n=L(r,e.slice(2)));let x=t;t.startsWith(i)&&(x=L(r,t.slice(2)));let c=await Promise.all([F(x,{ignoreCache:o.ignoreCache}).then(d).then(N).catch(j),F(n,{ignoreCache:o.ignoreCache}).then(d).catch(j)]);return{configFile:c[0],credentialsFile:c[1]}}});var y,$=s(()=>{"use strict";E();g();y=o=>Object.entries(o).filter(([e])=>e.startsWith(m.SSO_SESSION+f)).reduce((e,[t,r])=>T(h({},e),{[t.substring(t.indexOf(f)+1)]:r}),{})});var se,qe,G=s(()=>{"use strict";_();$();I();P();se=()=>({}),qe=async(o={})=>F(o.configFilepath??S()).then(d).then(y).catch(se)});var W,K=s(()=>{"use strict";W=(...o)=>{let e={};for(let t of o)for(let[r,i]of Object.entries(t))e[r]!==void 0?Object.assign(e[r],i):e[r]=i;return e}});var Ye,V=s(()=>{"use strict";g();K();Ye=async o=>{let e=await v(o);return W(e.configFile,e.credentialsFile)}});import{createHash as ne}from"crypto";import{join as ce}from"path";var X,D=s(()=>{"use strict";l();X=o=>{let t=ne("sha1").update(o).digest("hex");return ce(p(),".aws","sso","cache",`${t}.json`)}});import{promises as fe}from"fs";var pe,no,k=s(()=>{"use strict";D();({readFile:pe}=fe),no=async o=>{let e=X(o),t=await pe(e,"utf8");return JSON.parse(t)}});var M=s(()=>{"use strict"});var me=s(()=>{"use strict";l();A();D();k();g();G();V();M()});export{U as a,ae as b,X as c,no as d,f as e,v as f,qe as g,Ye as h,me as i};
